<!doctype html>
<html class="no-js" data-theme="dark" lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Karl&#39;s Blog</title>
        <meta name="author" content="Karl Sickendick">
        <meta name="description" content="Karl&#39;s blog of randomness and programming">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta property="og:title" content="Archive Pages" />
<meta property="og:description" content="I recently converted this blog over from a WordPress installation to use static pages generated by Hugo. I&rsquo;ve used Hugo for my other recent web creations and I&rsquo;ve been very impressed. The templating system is very nice, the page generation is lightning fast, and I&rsquo;m always able to find something near what I need in the themes.
One WordPress feature I liked was the listing of articles by year and month&hellip; My blog had a little timeline on the side with each year and month listed, annotated with the number of postings I made during each." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.notmet.net/2020/01/archive-pages/" />
<meta property="article:published_time" content="2020-01-31T10:00:00-07:00" />
<meta property="article:modified_time" content="2020-01-31T10:00:00-07:00" />

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Archive Pages"/>
<meta name="twitter:description" content="I recently converted this blog over from a WordPress installation to use static pages generated by Hugo. I&rsquo;ve used Hugo for my other recent web creations and I&rsquo;ve been very impressed. The templating system is very nice, the page generation is lightning fast, and I&rsquo;m always able to find something near what I need in the themes.
One WordPress feature I liked was the listing of articles by year and month&hellip; My blog had a little timeline on the side with each year and month listed, annotated with the number of postings I made during each."/>
<meta name="twitter:site" content="@kc0bfv"/>

        <meta name="generator" content="Hugo 0.64.1" />
        
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700%7CNoto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://blog.notmet.net/css/styles.css">
        <link rel="icon" href="https://blog.notmet.net/favicon.ico">
        <link rel="stylesheet" href="https://blog.notmet.net/css/highlightjs/monokai.css">
        <script src="https://blog.notmet.net/js/vendor/modernizr-2.8.0.min.js"></script>
        

        <script>
            
            function randomHeaderImg() {
                let images = ["https://blog.notmet.net/wp-content/uploads/2017/12/IMG_20171012_150021.jpg","https://blog.notmet.net/wp-content/uploads/2017/12/IMG_20171008_114417.jpg","https://blog.notmet.net/wp-content/uploads/2017/12/20161104_125204.jpg","https://blog.notmet.net/wp-content/uploads/2012/07/blog.jpg","https://blog.notmet.net/wp-content/uploads/2012/07/cropped-arequipadoorheader.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/austinWindows.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/bridge.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/candles.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/coloredWindows.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/coolStepsBro.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/cuzcoNight.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/flowerClose.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/guinneaPigMeal.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/ivyWall.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/montereyTree.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/motorcycle.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/mushroom.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/cropped-peruFruit.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/piccu.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/piccuEdge.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/seaweed.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/smallFalls.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/terraceFarming.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/treeHouse.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/treeShadow.jpg","https://blog.notmet.net/wp-content/uploads/2012/10/waterBridge.jpg"];
                let img_ind = Math.ceil(Math.random() * images.length) - 1;
                let sel_url = images[img_ind];
                let img = new Image();
                img.onload = function() {
                    function set_img() {
                        let element = document.getElementsByClassName("site-header")[0];
                        element.style.backgroundImage = "url(" + sel_url + ")";
                    }
                    if( document.readyState === "complete" ) { set_img() }
                    else { window.onload = set_img }
                }
                img.src = sel_url;
            }
            randomHeaderImg();
            
        </script>
        
        <noscript>
            <style>
                .site-header {
                    background-image: url(https://blog.notmet.net/wp-content/uploads/2017/12/IMG_20171012_150021.jpg);
                }
            </style>
        </noscript>
        
    </head>
    <body>
        <header class="site-header">
          <div>
          
          </div>
        </header>
        <div class="container clearfix">
            <nav class="nav" id="navtop">
  <p class="link"><a href="https://notmet.net/">Homepage</a></p>
<p class="link"><a href="/categories/">Categories</a></p>
<p class="link"><a href="/tags/">Tags</a></p>
<p class="link"><a href="/archive/">Archive</a></p>

</nav>


            <main class="content">

    <article class="post">
        <a class="btn home" href="https://blog.notmet.net/" title="Back to home">&laquo; Back to home</a>
        
<h1><a href="https://blog.notmet.net/2020/01/archive-pages/">Archive Pages</a></h1>

<footer class="post-info">Posted on <span class="post-meta"><time datetime="2020-01-31">2020.01.31</time>

    &middot; Tagged in
        
        <a href="https://blog.notmet.net/tags/hugo">hugo</a>, 
        
        <a href="https://blog.notmet.net/tags/programming">programming</a>
        
    

</span>
</footer>

        <p>I recently converted this blog over from a WordPress installation to use static pages generated by Hugo.  I&rsquo;ve used Hugo for my other recent web creations and I&rsquo;ve been very impressed.  The templating system is very nice, the page generation is lightning fast, and I&rsquo;m always able to find something near what I need in the themes.</p>
<p>One WordPress feature I liked was the listing of articles by year and month&hellip;  My blog had a little timeline on the side with each year and month listed, annotated with the number of postings I made during each.  This let me look back through my ramblings chronologically, which is how a lot of them are organized in my head.</p>
<p>Tags, categories, and year/month were each ways I could peruse my scrawlings, and I&rsquo;ve got occasion to turn to each.</p>
<p>Hugo didn&rsquo;t do that.  Categories and tags will, by default, generate index pages you can use to browse associated entries.  Not dates.  A few people have <a href="https://github.com/gohugoio/hugo/issues/448">requested this feature</a> or <a href="https://github.com/gohugoio/hugo/issues/448">created workarounds already</a>.</p>
<p>Wordpress had a widget where you&rsquo;d click on the month associated with the year you were interested in, then it&rsquo;d take you to a page listing all relevant posts.</p>
<p>I don&rsquo;t need that indirection&hellip;  I&rsquo;ve got under 150 posts - even with 1000 it wouldn&rsquo;t be crazy to list all the titles in a row.</p>
<p>Here&rsquo;s my solution to this - this is the content in <code>layouts/archive/list.html</code>:</p>
<pre><code>{{ partial &quot;header&quot; . }}
    &lt;a class=&quot;btn home&quot; href=&quot;{{ .Site.BaseURL }}&quot; title=&quot;{{ .Site.Data.l10n.article.back_to_home }}&quot;&gt;&amp;laquo; {{ .Site.Data.l10n.article.back_to_home }}&lt;/a&gt;

    {{ $.Scratch.Set &quot;open&quot; 0 }}
    {{ $.Scratch.Set &quot;month&quot; 13 }}
    {{ $.Scratch.Set &quot;year&quot; 0 }}
    {{ range $.Site.Pages.ByDate.Reverse }}
        {{ if and .IsPage (in .Site.Params.mainSections .Section) }}
            {{ $last_yr := $.Scratch.Get &quot;year&quot; }}
            {{ $last_mn := $.Scratch.Get &quot;month&quot; }}
            {{ if ne .Date.Year $last_yr }}
                {{ if eq ($.Scratch.Get &quot;open&quot;) 1 }}
                    &lt;/ul&gt;
                    {{ $.Scratch.Set &quot;open&quot; 0 }}
                {{ end }}
                &lt;h1&gt;{{ .Date.Year }}&lt;/h1&gt;
                {{ $.Scratch.Set &quot;year&quot; .Date.Year }}
                {{ $.Scratch.Set &quot;month&quot; 13 }}
            {{ end }}
            {{ if ne .Date.Month $last_mn }}
                {{ if eq ($.Scratch.Get &quot;open&quot;) 1 }}
                    &lt;/ul&gt;
                    {{ $.Scratch.Set &quot;open&quot; 0 }}
                {{ end }}
                &lt;h2&gt;{{ .Date.Month }}&lt;/h2&gt;
                {{ $.Scratch.Set &quot;month&quot; .Date.Month }}
                &lt;ul&gt;
                {{ $.Scratch.Set &quot;open&quot; 1 }}
            {{ end }}
            &lt;li&gt;&lt;a href=&quot;{{ .Permalink }}&quot;&gt;{{ .Title }}&lt;/a&gt;&lt;/li&gt;
        {{ end }}
    {{ end }}
    {{ if eq ($.Scratch.Get &quot;open&quot;) 1 }}
        &lt;/ul&gt;
    {{ end }}

{{ partial &quot;footer&quot; . }}
</code></pre><p>I&rsquo;m using the <a href="https://github.com/gohugoio/hugo/issues/448">hugo-minimalist-theme</a> by digitalcraftsman, but most themes have a header and footer partial, and here it just does exactly what you&rsquo;d expect.</p>
<p>This uses a couple scratch variables to keep track of the output state&hellip;  It sorts the posts chronologically first, then goes backwards over them.  When it notes a change in month or year, it closes the old unordered post list, outputs a header for the new year/month, then creates a new unordered list before outputting the post titles as list elements.  It must then keep track of whether a list is actually open or not.</p>
<p>The result is the archive page you see linked on the left&hellip;  It&rsquo;s just a long list of year, sub-lists of months, then sub-lists of posts in chronological order.  This provides the same look-back ability in a way that is visually appealing, and also lets me <code>Ctrl+F</code> a post title&hellip;  Post title search was something else difficult with Hugo that is now solved.</p>
<blockquote>
<p>NOTE: You&rsquo;ll also need to create a file in <code>content/archive/_index.md</code> with at least the minimum front matter (title, I recommend&hellip;)</p>
</blockquote>

        <ul class="share-buttons">
    <li>Share this article:</li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.notmet.net%2f2020%2f01%2farchive-pages%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook"></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Archive%20Pages&amp;url=https%3a%2f%2fblog.notmet.net%2f2020%2f01%2farchive-pages%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Tweet this article"></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.notmet.net%2f2020%2f01%2farchive-pages%2f&title=Archive%20Pages" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title="Share on Linkedin"></a>
    </li>
</ul>

    </article>
    
</main>
<aside class="author">
  <img class="profile-image" src="https://s.gravatar.com/avatar/8dcaef6cede11442234ac079a71f35a8?s=80" alt="Karl Sickendick" />
  <p class="name">by 
  <strong>Karl Sickendick</strong></p>
  <p class="address"></p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/kc0bfv" class="icon-twitter" target="_blank" title="Twitter" aria-label="Twitter"></a></li>













<li><a href="//github.com/kc0bfv" class="icon-github" target="_blank" title="Github" aria-label="Github"></a></li>


<li><a href="https://blog.notmet.net/index.xml" class="icon-rss" target="_blank" title="RSS" aria-label="RSS"></a></li>

  </ul>
  <br><br>
</aside>

<nav class="nav" id="navbot">
  <p class="link"><a href="https://notmet.net/">Homepage</a></p>
<p class="link"><a href="/categories/">Categories</a></p>
<p class="link"><a href="/tags/">Tags</a></p>
<p class="link"><a href="/archive/">Archive</a></p>

</nav>

</div>
<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="https://blog.notmet.net/index.xml" title="RSS" aria-label="RSS"></a>
        <p>&copy; 2020 &middot; Karl Sickendick</p>
  </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="https:\/\/blog.notmet.net\/js\/vendor\/jquery-1.11.0.min.js"><\/script>')</script>
<script src="https://blog.notmet.net/js/plugins.js"></script>





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-42117518-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>

